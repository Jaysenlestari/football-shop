{% load static %}
<article
  class="bg-slate-900 rounded-xl border border-slate-800 overflow-hidden transition-all duration-200 hover:shadow-[0_12px_32px_rgba(2,6,23,0.45)] hover:border-slate-700">
  
  <!-- Media: tinggi seragam, gambar utuh & center -->
  <div class="relative">
    <div class="h-56 md:h-60 lg:h-64 w-full bg-slate-800 flex items-center justify-center">
      {% if product.thumbnail %}
        <img
          src="{{ product.thumbnail }}"
          alt="{{ product.name }} thumbnail"
          class="max-h-full max-w-full object-contain block select-none"
          loading="lazy">
      {% else %}
        <div class="w-full h-full bg-slate-800"></div>
      {% endif %}
    </div>

    <!-- Badges -->
    <div class="absolute top-3 left-3 flex gap-2">
      <span class="px-2.5 py-0.5 rounded-full text-xs font-semibold bg-sky-500/90 text-slate-950">
        {{ product.get_category_display }}
      </span>
    </div>
    <div class="absolute top-3 right-3 flex gap-2">
      {% if product.is_featured %}
        <span class="px-2.5 py-0.5 rounded-full text-xs font-semibold bg-amber-300/90 text-slate-950">Featured</span>
      {% endif %}
      {% if product.is_products_reccomended %}
        <span class="px-2.5 py-0.5 rounded-full text-xs font-semibold bg-fuchsia-300/90 text-slate-950">Recommended</span>
      {% endif %}
    </div>
  </div>

  <!-- Body -->
  <div class="p-5">
    <!-- Title = link ke detail -->
    <h3 class="text-lg font-semibold text-white leading-tight mb-1">
      <a href="{% url 'main:show_products' product.id %}" class="hover:text-sky-300 transition-colors">
        {{ product.name }}
      </a>
    </h3>

    <!-- Price -->
    <div class="text-xl font-semibold text-sky-400 mb-3">
      Rp {{ product.price}}
    </div>

    <!-- Meta -->
    <p class="text-[13px] text-slate-400 mb-3">
      Brand: <span class="text-slate-200 font-medium">{{ product.brand }}</span>
      · Stock: <span class="text-slate-200 font-medium">{{ product.stock }}</span>
      {% if product.clothes_size %} · Size: <span class="text-slate-200 font-medium">{{ product.clothes_size }}</span>{% endif %}
      {% if product.shoe_size %} · Shoe: <span class="text-slate-200 font-medium">{{ product.shoe_size }}</span>{% endif %}
    </p>

    <!-- Snippet -->
    <p class="text-slate-300 text-sm leading-relaxed mb-4">
      {{ product.description|truncatewords:26 }}
    </p>

    <!-- Footer -->
    <div class="pt-4 border-t border-slate-800 flex items-center justify-end">
      {% if user.is_authenticated and product.user == user %}
        <div class="flex gap-4 text-sm">
          <a href="{% url 'main:edit_product' product.id %}" class="text-slate-300 hover:text-white">Edit</a>
          <a href="{% url 'main:delete_product' product.id %}" class="text-rose-400 hover:text-rose-300">Delete</a>
        </div>
      {% endif %}
    </div>
  </div>
</article>
