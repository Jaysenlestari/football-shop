{% load static %}
<article class="group bg-slate-900/90 rounded-xl border border-slate-800 shadow-sm hover:shadow-sky-900/20 transition duration-300 card-hover overflow-hidden ring-1 ring-slate-800/60 hover:ring-sky-500/30">
  <!-- Media -->
  <div class="aspect-[16/9] relative overflow-hidden bg-slate-800">
    {% if product.thumbnail %}
      <img src="{{ product.thumbnail }}" alt="{{ product.name }} thumbnail"
            class="w-full max-h-64 object-contain mx-auto p-3 transition-transform duration-500 ease-out group-hover:scale-[1.03]">
    {% else %}
      <div class="w-full h-full grid place-items-center text-slate-500 text-sm">No image</div>
    {% endif %}

    <div class="absolute top-3 left-3">
      <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-[11px] font-medium bg-sky-500 text-slate-950 shadow">
        {{ product.get_category_display }}
      </span>
    </div>

    <div class="absolute top-3 right-3 flex gap-2">
      {% if product.is_featured %}
        <span class="inline-flex items-center px-2 py-0.5 rounded text-[11px] font-medium bg-amber-300 text-slate-950 shadow">Featured</span>
      {% endif %}
      {% if product.is_products_reccomended %}
        <span class="inline-flex items-center px-2 py-0.5 rounded text-[11px] font-medium bg-fuchsia-300 text-slate-950 shadow">Recommended</span>
      {% endif %}
    </div>
  </div>

  <!-- Body -->
  <div class="p-5">
    <h3 class="text-lg font-semibold text-white mb-2 leading-tight line-clamp-2">
      <a href="{% url 'main:show_products' id=product.pk %}"
         class="focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/60 rounded hover:text-sky-300 transition-colors">
        {{ product.name }}
      </a>
    </h3>

    <p class="text-[13px] text-slate-400 mb-3 flex flex-wrap gap-x-3 gap-y-1">
      <span>Brand: <span class="text-slate-200 font-medium">{{ product.brand }}</span></span>
      <span>Stock: <span class="text-slate-200 font-medium">{{ product.stock }}</span></span>
    </p>

    <p class="text-slate-300 text-sm leading-relaxed line-clamp-3 mb-4">
      {{ product.description|truncatewords:24 }}
    </p>

    <div class="pt-4 border-t border-slate-800 flex items-center justify-between">
      <span class="font-semibold text-white">Rp {{ product.price }}</span>

      {% if user.is_authenticated and product.user == user %}
      <div class="flex gap-3">
        <a href="{% url 'main:edit_product' id=product.pk %}"
           class="text-slate-300 hover:text-white text-sm transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/60 rounded">
          Edit
        </a>
        <a href="{% url 'main:delete_product' id=product.pk %}"
           class="text-rose-400 hover:text-rose-300 text-sm transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-500/60 rounded">
          Delete
        </a>
      </div>
      {% endif %}
    </div>
  </div>
</article>
