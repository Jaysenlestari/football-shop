{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>{{ product.name }} - Football Shop</title>
{% endblock meta %}

{% block content %}
<div class="w-full min-h-screen">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

    <div class="mb-6">
      <a href="{% url 'main:show_main' %}" class="text-slate-300 hover:text-white font-medium transition-colors">
        ‚Üê Back to Products
      </a>
    </div>

    <article class="bg-slate-900 rounded-lg border border-slate-800 overflow-hidden">
    <div class="p-6 sm:p-8">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">

        <!-- KIRI: FOTO (diperkecil) -->
        <div class="lg:col-span-5">
          {% if product.thumbnail %}
          <div class="w-full bg-slate-800 rounded-lg overflow-hidden">
            <div class="w-full mx-auto aspect-[4/5] max-h-96 lg:max-h-[520px]">
              <img
                src="{{ product.thumbnail }}"
                alt="{{ product.name }} thumbnail"
                class="w-full h-full object-contain p-4 block"
                loading="lazy">
            </div>
          </div>
          {% else %}
          <div class="w-full bg-slate-800 rounded-lg aspect-[4/5] grid place-items-center text-slate-400">
            No image
          </div>
          {% endif %}
        </div>

        <!-- KANAN: DETAIL + DESKRIPSI -->
        <div class="lg:col-span-7">
          <!-- Nama -->
          <h1 class="text-3xl sm:text-4xl font-bold text-white leading-tight">
            {{ product.name }}
          </h1>

          <!-- Badge tepat di bawah nama biar nggak kosong -->
          <div class="flex flex-wrap items-center gap-2 mt-3 mb-5">
            <span class="inline-flex items-center px-3 py-1 rounded-md text-xs font-medium bg-sky-500 text-slate-950">
              {{ product.get_category_display }}
            </span>
            {% if product.is_featured %}
            <span class="inline-flex items-center px-3 py-1 rounded-md text-xs font-medium bg-amber-300 text-slate-950">Featured</span>
            {% endif %}
            {% if product.is_products_reccomended %}
            <span class="inline-flex items-center px-3 py-1 rounded-md text-xs font-medium bg-fuchsia-300 text-slate-950">Recommended</span>
            {% endif %}
          </div>

          <!-- Harga -->
          <div class="text-2xl font-semibold text-sky-400 mb-4">
            Rp {{ product.price }}
          </div>

          <!-- Meta -->
          <div class="space-y-3 text-sm mb-6">
            <div class="flex flex-wrap gap-x-6 gap-y-2 text-slate-400">
              <span>Brand: <b class="text-slate-200">{{ product.brand }}</b></span>
              <span>Stock: <b class="text-slate-200">{{ product.stock }}</b></span>
              <span>Rating: <b class="text-slate-200">{{ product.rating|floatformat:1 }}</b></span>
            </div>
            <div class="flex flex-wrap gap-x-6 gap-y-2 text-slate-400">
              {% if product.clothes_size %}
                <span>Size: <b class="text-slate-200">{{ product.clothes_size }}</b></span>
              {% endif %}
              {% if product.shoe_size %}
                <span>Shoe Size: <b class="text-slate-200">{{ product.shoe_size }}</b></span>
              {% endif %}
            </div>
          </div>

          <!-- Deskripsi (sekarang di KANAN, di bawah harga/meta) -->
          <div class="prose prose-invert prose-slate max-w-none">
            <h2 class="text-xl font-semibold text-white mb-2">Description</h2>
            <div class="text-slate-200 leading-relaxed whitespace-pre-line text-base sm:text-lg">
              {{ product.description }}
            </div>
          </div>

          {% if user.is_authenticated and product.user == user %}
          <div class="mt-8">
            <a href="{% url 'main:edit_product' product.pk %}" class="inline-flex items-center px-4 py-2 rounded-md text-sm font-medium border border-slate-700 text-slate-200 hover:bg-slate-800 transition">
              Edit
            </a>
            <a href="{% url 'main:delete_product' product.pk %}" class="inline-flex items-center px-4 py-2 rounded-md text-sm font-medium border border-slate-700 text-slate-200 hover:bg-slate-800 transition">
              Delete
            </a>
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Footer pemilik produk -->
    <div class="border-t border-slate-800 p-6 sm:p-8 bg-slate-950/50">
      <div class="flex items-center justify-between">
        <div>
          <div class="font-medium text-white">
            {% if product.user %}
              <p>Employee: {{ product.user.username }}</p>
            {% else %}
              <p>Employee: Anonymous</p>
            {% endif %}
          </div>
          <p class="text-sm text-slate-400">Product Owner</p>
        </div>
      </div>
    </div>
  </article>
  </div>
</div>
{% endblock content %}